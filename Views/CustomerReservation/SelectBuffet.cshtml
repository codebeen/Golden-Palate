@{
    ViewData["Title"] = "Select Buffet";
    Layout = "~/Views/Shared/_ReservationLayout.cshtml";
}

<div class="container d-flex flex-column align-items-center justify-content-center">
    <div class="d-flex align-items-center w-100 position-relative">
        <div class="position-absolute start-0">
            <a href="javascript:history.back()" class="btn btn-outline-secondary">
                ← Back
            </a>
        </div>
        <div class="w-100 text-center">
            <h1>Select Buffet</h1>
        </div>
    </div>
    <p>Select a buffet to reserve.</p>

    <div class="row">
        <!-- Breakfast Buffet -->
        <div class="col-sm-4 mb-4">
            <div class="card" style="width: 18rem;">
                <!-- Image display (check if ImagePath is not null) -->
                <img src="~/images/breakfast_buffet.jpg" class="card-img-top" alt="Buffet Image">
                <div class="card-body">
                    <h5 class="card-title">Breakfast Buffet</h5>
                    <p class="card-text">Price: ₱1680.00</p>
                    <p class="card-text">Meal Time Period: 8:00 AM to 10:00 AM</p>
                    <p class="card-text">A selection of morning favorites including eggs, pastries, fruits, and beverages.</p>
                    <a asp-action="DisplayTablesForBreakfastBuffet" asp-controller="CustomerReservation" class="btn btn-primary w-100">Select</a>
                </div>
            </div>
        </div>

        <!-- Lunch Buffet -->
        <div class="col-sm-4 mb-4">
            <div class="card" style="width: 18rem;">
                <!-- Image display (check if ImagePath is not null) -->
                <img src="~/images/lunch_buffet.jpg" class="card-img-top" alt="Buffet Image">
                <div class="card-body">
                    <h5 class="card-title">Lunch Buffet</h5>
                    <p class="card-text">Price: ₱2800.00</p>
                    <p class="card-text">Meal Time Period: 11:30 AM to 2:30 PM</p>
                    <p class="card-text">A variety of savory dishes with meats, vegetables, salads, and desserts.</p>
                    <a asp-action="DisplayTablesForLunchBuffet" asp-controller="CustomerReservation" class="btn btn-primary w-100">Select</a>
                </div>
            </div>
        </div>

        <!-- Dinner Buffet -->
        <div class="col-sm-4 mb-4">
            <div class="card" style="width: 18rem;">
                <!-- Image display (check if ImagePath is not null) -->
                <img src="~/images/lunch_buffet.jpg" class="card-img-top" alt="Buffet Image">
                <div class="card-body">
                    <h5 class="card-title">Dinner Buffet</h5>
                    <p class="card-text">Price: ₱4200.00</p>
                    <p class="card-text">Meal Time Period: 5:00 PM to 8:00 PM</p>
                    <p class="card-text">An assortment of dinner options with entrees, sides, and specialty dishes.</p>
                    <a asp-action="DisplayTablesForDinnerBuffet" asp-controller="CustomerReservation" class="btn btn-primary w-100">Select</a>
                </div>
            </div>
        </div>
    </div>
</div>

<form id="cancelReservationForm" method="post" action="@Url.Action("CancelReservationInDatabase", "CustomerReservation")" enctype="multipart/form-data">
    <input type="hidden" name="reservationNumber" value="@TempData["ReservationNumber"]" />
</form>

@section Scripts {
    <script>
        @if (TempData["SuccessMessage"] != null)
        {
            <text>
                    Swal.fire({
                        title: 'Success!',
                    text: '@TempData["SuccessMessage"]',
                    icon: 'success',
                    confirmButtonText: 'OK'
                                                    });
            </text>
        }

        @if (TempData["ErrorMessage"] != null)
        {
            <text>
                    Swal.fire({
                        title: 'Error!',
                    text: '@TempData["ErrorMessage"]',
                    icon: 'error',
                    confirmButtonText: 'OK'
                                                    });
            </text>
        }

        @if (TempData["DeleteReservation"] != null && TempData["ReservationNumber"] != null)
        {
            TempData.Keep("ReservationNumber"); // Prevents TempData from being cleared

            <text>
                    Swal.fire({
                        title: 'Cancel Reservation!',
                    text: '@TempData["DeleteReservation"]',
                    icon: 'warning',
                    confirmButtonText: 'Confirm',
                    confirmButtonColor: '#d33',
                    showCancelButton: true,
                    cancelButtonText: 'Close',
                    cancelButtonColor: '#6c757d'
                        }).then((result) => {
                            if (result.isConfirmed) {
                                document.getElementById("cancelReservationForm").submit();
                            }
                        });
            </text>
        }
    </script>
}